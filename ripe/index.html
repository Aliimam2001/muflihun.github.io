<html>
<head>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0,minimum-scale=1.0,user-scalable=0'/>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
<style>
body { padding: 10px; }
#public-key {
    width: 100%;
    height: 280px;
    font-family: monospace;
}
#message {
    width: 100%;
    height: 280px;
}
#output {
    white-space: pre-wrap;
}
#copy { float: right; }
</style>
<script type="text/javascript" src="jsencrypt.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>

<script>
   
  var clipboard = null;
  var crypt = null;
  togglePublicKey = function() {
    $("#public-key").toggle(); 
    updatePublicKeyButton();
  }

  updatePublicKeyButton = function() {
    $("#toggle-public-key").val($("#public-key").is(":visible") ? "Hide Public Key" : "Show Public Key");
  }
  $(document).ready(function() {
    clipboard = new Clipboard('#copy');
     $('#toggle-public-key').click(function() { togglePublicKey(); });
     $('.output').hide();
     $('#encrypt').click(function () {
         crypt = new JSEncrypt();
         crypt.setPublicKey($("#public-key").val());
         var encrypted = crypt.encrypt($("#message").val());
         if (encrypted === false) {
             encrypted = "Invalid public key or message too long.";
             $("#public-key").show();
             updatePublicKeyButton();
         } else {
              $("#public-key").hide();
             updatePublicKeyButton();
         }
         $('#output').text(encrypted);
         $('.output').show();
     });
     var keyFromParam = /key=([^&]+)/.exec(location.search);
     if (keyFromParam !== null && keyFromParam.length === 2) {
         $('#public-key').val(keyFromParam[1]);
         togglePublicKey();
     }
  }); 
</script>
</head>
<body>
<h3><img src='/labs.png' style='width:64px;height:auto;vertical-align: bottom;' /> Muflihun Labs</h3>
<br/>
<img style='width:256px;max-width:50%' src='https://raw.githubusercontent.com/muflihun/ripe/master/ripe.png?' />
<br/>
<br/>
<a href='/ripe/docs'>Documentation</a> <br/>
<a href='https://github.com/muflihun/ripe'>Github</a> <br/>
<br/>
<a href='/'>Home</a><br/>
<hr/>
<input type='button' id='toggle-public-key' value='Hide Public Key' />
<br/>
<textarea id='public-key' placeholder="Enter receipient public key here">
</textarea>
<br/>
<br/>
<textarea id='message' placeholder="Enter your message here"></textarea>
<br/>
<input type='button' id='encrypt' value='Encrypt' />
<br/>
<br/>
<label class='output'>Encrypted Message</label>
<input type='button' id='copy' class='output' value='Copy'  data-clipboard-target="#output" />
<pre id='output' class='output'></pre>
<hr/>
<div style='text-align: center'>&copy; <a href='https://muflihun.com'>Muflihun.com<a/></div>
</body>
</html>
